---
title: "Next.js Dark Mode 적용하기"
date: 2024-02-29
desc: Next.js, tailwind 환경에 다크모드를 적용해보자.
thumbnail: /posts/nextjs_blog/setup/thumbnail.png
---

## 다크/라이트 모드란?

화면을 어둡게 혹은 밝게 표시할 수 있는 인터페이스 옵션이다.
사용자마다 모드 선호도가 다를 수 있기 때문에, 
사용자가 자신에게 적합한 환경을 직접 선택할 수 있도록 자유를 제공하는 것이 이상적이다.

다크/라이트 각 모드의 특징과 장점은 다음과 같다.

- Dark Mode
  - 배경을 어둡게, 텍스트와 다른 요소를 밝게 표시
  - 눈의 피로를 줄일 수 있고, 특히 야간에 눈을 편안하게 유지할 수 있다.
  - OLED 화면 기기에서 검은 배경은 픽셀을 off하므로, 에너지 소모를 줄여 배터리 수명을 연장할 수 있다.

- Light Mode
  - 밝은 배경과 어두운 텍스트 및 요소 사용
  - 일반적인 웹사이트 및 앱의 기본테마로, 더 익숙한 UI 스타일
  - 디자인이 더 다양한 콘텐츠 유형에 적합

---

## 목표

> 이 블로그에 다크/라이트 모드를 적용하는 것

단순 전환 뿐만 아니라, <u>system 옵션도 추가</u>하려고 한다.
(사용자 기기(핸드폰, 웹 브라우저) 자체의 다크/라이트 설정을 따라가는 것)

system 설정을 따라가는 option이 최근 들어 자주 보이는 것 같다. (요새 트렌드인가..?)

아래 예시 이미지처럼, 
[tailwind](https://tailwindcss.com/docs/installation)와 [shadcn/ui](https://ui.shadcn.com/docs) 공식 웹페이지에도 
세가지 옵션이 모두 적용되어 있는 것을 볼 수 있다.

![dark/light/system option - tailwind css 공식 홈페이지](/posts/nextjs_blog/theme/1.jpg)

![dark/light/system option - shadcn/ui 공식 홈페이지](/posts/nextjs_blog/theme/2.jpg)

---

## 과거 작업 내용

다른 웹사이트(Next.js)에 다크모드를 적용했던 경험이 있다.
라이브러리 없이 직접 작업했었는데, 주요 부분은 다음과 같다.

1. 다크/라이트 모드에서 사용할 color palette 사전 정의
2. 마지막으로 설정한 테마 기억
    - local storage에 해당 데이터 저장
    - SSR 과정에서 테마 주입 (flickering 방지)

1번의 경우는 팀 내 디자이너분이 정해주셔서, 큰 어려움이 없었다.
2번 과정이 생각보다 번거롭고, 예외 case가 많았다.

그 때 적용했던 script 예시는 아래와 같다.

```ts
export default function DarkThemeHandler() {
  // local storage theme을 기반으로 최초 theme setting (SSR)
  const darkThemeScript = `(
    function (){
        const localStorageTheme = window.localStorage.getItem("themeMode")
        const initialTheme = localStorageTheme === "Light" ? "Light" : "Dark"
        document.body.setAttribute("data-theme", initialTheme)
    })()`

  return <script dangerouslySetInnerHTML={{ __html: darkThemeScript }} />
}
```

---

## Next-Themes 소개

이번에도 직접 작업하려고 했으나, 엄청난 라이브러리를 발견하게 되었다.
이름 그대로 Next.js 프로젝트에 손쉽게 theme를 적용하게 해주는 라이브러리다.

Next-Themes
- [NPM](https://www.npmjs.com/package/next-themes)
- [Github](https://github.com/pacocoursey/next-themes)

라이브러리의 주요 특징은 다음과 같다. (공식 github 발췌)



---

## 환경 설정

<Callout type="warn">
Next.js 14 버전 (app router), Tailwind CSS 를 사용하고 있습니다.
</Callout>




